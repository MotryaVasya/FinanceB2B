from aiogram import Router, types, F
from aiogram.types import Message
from project.bot.messages.messages import *
from project.bot.states import *
from aiogram.filters import or_f
from project.bot.Save import save
from project.bot.keyboards.reply import (
    start_keyboard,
    Afteradd_keyboard
)
router=Router()
@router.message(or_f(F.text=="–ü–µ—Ä–µ–π—Ç–∏ –≤ –º–µ–Ω—é"),Context.biba)
async def start_handler_for_help(message: Message,state: FSMContext):
    try:
        state.clear()
        await message.answer(
            pre_balance,
            reply_markup=await start_keyboard()
        )
    except Exception as e:
        print(f"‚ö†Ô∏è –û—à–∏–±–∫–∞: {e.__class__.__name__}: {e}")

@router.message(F.text == "–ü–æ–ø–æ–ª–Ω–∏—Ç—å")
async def Add_money_handler(message: Message):
    user_id = message.from_user.id 
    open("popolnit.txt","w").write(str(await save.update(user_id, "ADD_MONEY")))
    open("main44.txt","w").write(str(await save.convert_to_json()))
    text = ('üí∞ –•–æ—Ç–∏—Ç–µ –ø–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å?\nüè¶ –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–ú–æ–∏ –∑–∞–ø–∏—Å–∏" –¥–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è! üí≥üìà\n ')
    try:
        await message.answer(
            text,
            reply_markup=await Afteradd_keyboard()
        )
    except Exception as e:
        print(f"‚ö† –û—à–∏–±–∫–∞: {e.__class__.__name__}: {e}")